# Data Visualization Skill - 使い方ガイド

Chart.jsを使用したインタラクティブなデータ可視化HTMLを生成するスキルです。

## クイックスタート

### 1. 基本的な使い方

Claude Codeで以下のようにリクエストします：

```
データ可視化HTMLを作成してください。
データ: 月別売上（1月: 100, 2月: 120, 3月: 150, 4月: 130, 5月: 180, 6月: 200）
グラフタイプ: 折れ線グラフ
タイトル: "2024年上半期売上推移"
```

### 2. 生成されたHTMLの表示

```bash
# ブラウザで直接開く
open visualization.html

# またはローカルサーバーで
python -m http.server 8000
# ブラウザで http://localhost:8000/visualization.html を開く
```

### 3. サンプルを見る

`example-chart.html` をブラウザで開いて、実際のグラフを確認できます。

## ファイル構成

```
.claude/skills/data-visualization/
├── skill.md            # スキルの説明
├── template.html       # グラフ生成テンプレート
├── example-chart.html  # サンプルグラフ
└── README.md           # このファイル
```

## グラフタイプ

### 1. 折れ線グラフ (Line Chart)

**用途**: 時系列データ、トレンド分析

```
折れ線グラフを作成:
データ: 株価（月曜: 1000, 火曜: 1050, 水曜: 1020, 木曜: 1080, 金曜: 1100）
```

**オプション**:
- エリアチャート（塗りつぶし）
- 複数ライン
- ステップライン

### 2. 棒グラフ (Bar Chart)

**用途**: カテゴリ別比較、ランキング

```
棒グラフを作成:
データ: 商品売上（商品A: 500, 商品B: 300, 商品C: 400, 商品D: 200）
向き: 縦
```

**バリエーション**:
- 縦棒グラフ (Vertical Bar)
- 横棒グラフ (Horizontal Bar)
- 積み上げ棒グラフ (Stacked Bar)
- グループ化棒グラフ (Grouped Bar)

### 3. 円グラフ (Pie Chart)

**用途**: 割合、シェア表示

```
円グラフを作成:
データ: 市場シェア（当社: 35%, A社: 25%, B社: 20%, その他: 20%）
```

**バリエーション**:
- 円グラフ (Pie)
- ドーナツグラフ (Doughnut)
- セミサークル (Semi-circle)

### 4. レーダーチャート (Radar Chart)

**用途**: 多次元データの比較

```
レーダーチャートを作成:
データ: スキル評価（技術力: 80, コミュニケーション: 70, リーダーシップ: 60, 問題解決: 85, 創造性: 75）
```

### 5. 散布図 (Scatter Plot)

**用途**: 相関関係の分析

```
散布図を作成:
データ: [{x: 10, y: 20}, {x: 15, y: 30}, {x: 20, y: 25}, {x: 25, y: 35}]
軸ラベル: X軸=広告費, Y軸=売上
```

**バリエーション**:
- 基本的な散布図
- バブルチャート（サイズも表現）

### 6. 混合チャート (Mixed Chart)

**用途**: 複数の指標を同時に表示

```
混合チャートを作成:
データ1: 売上（折れ線グラフ）
データ2: 利益（棒グラフ）
```

## データ形式

### CSV形式

```
CSVデータを可視化:
月,売上,利益
1月,1000,200
2月,1200,250
3月,1100,220
4月,1300,280
```

### テーブル形式

```
以下のテーブルを棒グラフで可視化:
| 商品    | 売上 |
|---------|------|
| 商品A   | 500  |
| 商品B   | 400  |
| 商品C   | 300  |
```

### 配列形式

```
データ: [10, 20, 30, 40, 50]
ラベル: ["A", "B", "C", "D", "E"]
```

### JSON形式

```json
{
  "labels": ["1月", "2月", "3月"],
  "datasets": [{
    "label": "売上",
    "data": [100, 120, 150]
  }]
}
```

## カスタマイズオプション

### 色の設定

```
カラースキーム: blue
# または
カスタムカラー: ["#FF6384", "#36A2EB", "#FFCE56"]
```

利用可能なカラースキーム:
- `default` - Chart.jsデフォルト
- `blue` - 青系グラデーション
- `green` - 緑系グラデーション
- `red` - 赤系グラデーション
- `warm` - 暖色系（赤、オレンジ、黄）
- `cool` - 寒色系（青、緑、紫）
- `pastel` - パステルカラー
- `vibrant` - ビビッドカラー
- `monochrome` - モノクローム（グレースケール）

### テーマの設定

```
テーマ: dark
# light, dark, minimal, corporate
```

### アニメーション

```
アニメーション: bounce
速度: 1500ms
```

アニメーションタイプ:
- `linear` - リニア
- `easeInQuad` - イーズインクアッド
- `easeOutBounce` - バウンス
- `easeInOutElastic` - エラスティック

### レイアウト

```
凡例位置: bottom
グリッド線: 表示
軸ラベルサイズ: 14px
```

## 複数グラフの作成

### ダッシュボード

```
データダッシュボードを作成:

グラフ1: 月別売上推移（折れ線グラフ）
データ: 1月=100, 2月=120, 3月=150

グラフ2: 商品カテゴリ別売上（円グラフ）
データ: カテゴリA=35%, カテゴリB=25%, カテゴリC=40%

グラフ3: 地域別売上（棒グラフ）
データ: 東京=500, 大阪=400, 名古屋=300, 福岡=200

レイアウト: 2x2グリッド
テーマ: ビジネス（青系）
```

## インタラクティブ機能

### ホバー効果

デフォルトで有効。データポイントにホバーすると詳細が表示されます。

### クリックイベント

凡例をクリックすると、そのデータセットの表示/非表示を切り替えられます。

### ズームとパン

```
ズーム機能を有効化
パン機能を有効化
```

Chart.js Zoomプラグインを使用して、マウスホイールでズーム、ドラッグでパンが可能になります。

### データラベル

```
データラベルを表示
フォーマット: 千円単位
```

## エクスポート機能

### PNG/JPEG出力

生成されたHTMLには、グラフを画像としてダウンロードする機能を含めることができます。

```
エクスポートボタンを追加
形式: PNG
```

ブラウザの開発者ツールのコンソールで:
```javascript
// Canvas要素を取得
const canvas = document.getElementById('myChart');
const url = canvas.toDataURL('image/png');

// ダウンロード
const link = document.createElement('a');
link.download = 'chart.png';
link.href = url;
link.click();
```

## 実装例

### 例1: 売上レポート

**リクエスト:**
```
2024年Q1の売上レポートを作成。

データ:
1月: 売上=250万, 利益=50万
2月: 売上=280万, 利益=60万
3月: 売上=320万, 利益=70万

グラフ1: 売上と利益の推移（折れ線グラフ、2ライン）
グラフ2: 月別利益率（棒グラフ）

タイトル: "2024年Q1 売上・利益レポート"
テーマ: ビジネス
色: 売上=青、利益=緑
```

**生成されるもの:**
- レスポンシブな2つのグラフ
- インタラクティブなツールチップ
- 印刷対応レイアウト

### 例2: KPIダッシュボード

**リクエスト:**
```
KPIダッシュボード作成:

1. 目標達成率（ドーナツグラフ）
   達成: 75%, 未達成: 25%

2. 週次トレンド（折れ線グラフ）
   Week1: 80, Week2: 85, Week3: 90, Week4: 88

3. 部門別パフォーマンス（レーダーチャート）
   営業: 90, マーケ: 85, 開発: 80, サポート: 95

4. 前年比（棒グラフ）
   今年: [100, 120, 150], 昨年: [90, 110, 140]

レイアウト: 2x2グリッド
テーマ: ダーク
```

### 例3: データ分析レポート

**リクエスト:**
```
統計分析結果の可視化:

1. ヒストグラム: データ分布
   ビン: [0-10: 5, 10-20: 15, 20-30: 25, 30-40: 20, 40-50: 10]

2. 散布図: 相関分析
   データポイント: [(x,y) のペア 20個]

3. 箱ひげ図: 外れ値検出
   最小: 10, Q1: 25, 中央値: 50, Q3: 75, 最大: 90

グリッド表示
統計値を併記
```

## ベストプラクティス

### グラフタイプの選択

| データの種類 | 推奨グラフ |
|-------------|-----------|
| 時系列データ | 折れ線グラフ |
| カテゴリ比較 | 棒グラフ |
| 割合・シェア | 円グラフ |
| 相関関係 | 散布図 |
| 多次元比較 | レーダーチャート |
| 分布 | ヒストグラム |

### 色の使い方

1. **意味のある色分け**
   - 売上 = 青
   - 利益 = 緑
   - コスト = 赤
   - 警告 = オレンジ

2. **カラーブラインド対応**
   - 赤と緑の組み合わせを避ける
   - パターンや形状も併用

3. **コントラスト**
   - 背景とデータの十分なコントラスト
   - ダークテーマでは明るい色を使用

### データラベル

1. **軸ラベル**
   - X軸、Y軸に明確なラベル
   - 単位を表示（円、%など）

2. **タイトル**
   - わかりやすく簡潔に
   - 期間や対象を明記

3. **フォーマット**
   - 数値の桁区切り（1,000）
   - パーセント表示（25%）
   - 通貨記号（¥1,000）

### パフォーマンス

1. **データポイント数**
   - 1,000ポイント以下を推奨
   - 大量データは集約・サンプリング

2. **アニメーション**
   - 必要に応じて無効化
   - 速度を調整

3. **レスポンシブ**
   - `maintainAspectRatio` を適切に設定
   - モバイル対応を考慮

## トラブルシューティング

### グラフが表示されない

**症状**: ページは表示されるがグラフが見えない

**チェックリスト**:
1. インターネット接続確認（CDNから読み込み）
2. ブラウザの開発者コンソールでエラー確認
3. Chart.jsのバージョン確認
4. Canvas要素のID確認

### データが正しく反映されない

**症状**: グラフは表示されるがデータがおかしい

**チェックリスト**:
1. データ配列の形式確認
2. ラベルとデータの数が一致しているか
3. 数値が文字列になっていないか
4. コンソールエラー確認

### レスポンシブが機能しない

**症状**: ウィンドウサイズを変更してもグラフサイズが変わらない

**解決策**:
```javascript
options: {
  responsive: true,
  maintainAspectRatio: false // または true
}
```

### 色がおかしい

**症状**: 指定した色と違う色で表示される

**チェックリスト**:
1. カラーコードの形式確認（#RRGGBB）
2. 配列の要素数確認
3. CSSとの競合確認

## 高度な機能

### プラグインの使用

```javascript
// データラベルプラグイン
import ChartDataLabels from 'chartjs-plugin-datalabels';

options: {
  plugins: {
    datalabels: {
      color: '#fff',
      font: {
        size: 14,
        weight: 'bold'
      }
    }
  }
}
```

### カスタムツールチップ

```javascript
options: {
  plugins: {
    tooltip: {
      callbacks: {
        label: function(context) {
          let label = context.dataset.label || '';
          if (label) {
            label += ': ';
          }
          label += new Intl.NumberFormat('ja-JP', {
            style: 'currency',
            currency: 'JPY'
          }).format(context.parsed.y);
          return label;
        }
      }
    }
  }
}
```

### リアルタイム更新

```javascript
// データ更新
function updateChart() {
  myChart.data.datasets[0].data.push(newData);
  myChart.update();
}

// 定期更新
setInterval(updateChart, 5000);
```

## 参考リンク

- [Chart.js 公式ドキュメント](https://www.chartjs.org/docs/latest/)
- [Chart.js サンプル集](https://www.chartjs.org/samples/latest/)
- [Chart.js GitHub](https://github.com/chartjs/Chart.js)
- [Chart.js コミュニティプラグイン](https://github.com/chartjs/awesome)

## ライセンス

- Chart.js: MIT License
- このスキル: MIT License

---

**データ可視化を楽しんでください！** 📊
